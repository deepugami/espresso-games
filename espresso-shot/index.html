<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Espresso Shot — Single-Button Timing</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Coffee ripple background animation -->
    <div class="ripple-background">
      <!-- Left side ripples -->
      <div class="circle xxlarge shade1 left"></div>
      <div class="circle xlarge shade2 left"></div>
      <div class="circle large shade3 left"></div>
      <div class="circle medium shade4 left"></div>
      <div class="circle small shade5 left"></div>
      
      <!-- Right side ripples -->
      <div class="circle xxlarge shade1 right"></div>
      <div class="circle xlarge shade2 right"></div>
      <div class="circle large shade3 right"></div>
      <div class="circle medium shade4 right"></div>
      <div class="circle small shade5 right"></div>
    </div>
    
    <div id="app">
      <canvas id="game" aria-label="Espresso Shot timing game" role="img"></canvas>
      <div id="hud">
        <div class="scores">
          <div class="score" id="confirmedBox"><span class="label">Confirmed rollups</span><span id="confirmed">0</span></div>
          <div class="score reorgs" id="reorgsBox"><span class="label">Reorgs</span><span id="reorgs">0</span></div>
          <div class="score combo" id="comboBox"><span class="label">Combo</span><span id="combo">x0</span></div>
          <div class="score best"><span class="label">Best</span><span id="best">0</span></div>
          <div class="score best"><span class="label">Best combo</span><span id="bestCombo">x0</span></div>
        </div>
        <div class="right-tools">
          <a class="home-link" href="../index.html" title="Back to Espresso Games">Home</a>
          <div class="controls">Tap / Click / Space</div>
          <div class="buttons">
            <button id="toggleBridge" aria-pressed="true" title="Toggle moving green zone">Bridge: On</button>
            <button id="muteBtn" aria-pressed="false" title="Toggle sound">Sound: On</button>
            <button id="resetBtn" title="Reset run">Reset</button>
            <button id="howtoBtn" title="How to play">How&nbsp;To&nbsp;Play</button>
          </div>
        </div>
      </div>
      <div id="tooltip">
        <strong>Espresso Shot</strong> — Time the shot when the meter hits the green zone.<br />
        Perfect hits = <em>finality</em>; misses = <em>reorg</em>.
      </div>
    </div>

    <div id="howto" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="howtoTitle">
      <div class="dialog">
        <div id="howtoTitle" class="dialog-title">How To Play</div>
        <div class="dialog-desc">
          Time your tap when the meter hits the green zone to pull a perfect shot. Streak perfects to build combo; misses cause reorgs. Toggle Bridge to move the zone.
        </div>
        <div class="dialog-actions">
          <button id="howtoClose" class="btn">Got it</button>
        </div>
      </div>
    </div>

    <script src="main.js"></script>
    <script>
      (function(){
        const btn = document.getElementById('howtoBtn');
        const modal = document.getElementById('howto');
        const close = document.getElementById('howtoClose');
        if(btn && modal && close){
          btn.addEventListener('click', ()=> modal.classList.remove('hidden'));
          close.addEventListener('click', ()=> modal.classList.add('hidden'));
          modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.classList.add('hidden'); });
          window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') modal.classList.add('hidden'); });
        }
      })();
    </script>
  </body>
  </html>


